{% extends 'store/base.html' %}

{% block title %}
Products
{% endblock title %}

{% block content %}

<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">

    {% for product in products %}
    <div class="col">
        <div class="card shadow-sm">
        <a href="{% url 'show-product' product.id %}">
            {% if product.photo %}
            <img width="100%" src="uploads/{{ product.photo }}" />
            {% else %}
            <img width="100%" src="uploads/products/mineralwater-strawberry.jpg" />
            {% endif %}
        </a>

        <div class="card-body d-flex flex-column justify-content-between align-items-between" style="min-height: 25vh;">
            <h2>{{ product.name }}</h2>
            <p class="card-text">{{ product.description }}</p>
            <div class="d-flex justify-content-between align-items-center">
            <div class="btn-group">
                <a href="{% url 'show-product' product.id %}">
                    <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                </a>

                {% if product.is_on_sale %}
                <button type="button" class="btn btn-sm btn-danger">SALE: {{ product.DISCOUNT_RATE|cut:"0."}}0% OFF</button>
                {% endif %}
            </div>
            <h3 class="text-body-secondary">${{ product.current_price|floatformat:2 }}</h3>
            </div>
        </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock content %}
